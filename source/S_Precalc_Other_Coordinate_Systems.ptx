<?xml version="1.0"?>
<!-- **********************************************************************-->
<!-- Copyright 2013-2018                                                   -->
<!-- Steven Schlicker                                                      -->
<!--                                                                       -->
<!-- This file is part of Active Calculus Multivariable.                   -->
<!--                                                                       -->
<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the Creative Commons BY-NC-SA license.  The work   -->
<!-- may be used for free by any party so long as attribution is given to  -->
<!-- the author(s), the work and its derivatives are used in the spirit of -->
<!-- "share and share alike"; no party may sell this work or any of its    -->
<!-- derivatives for profit.  All trademarks are the registered marks of   -->
<!-- their respective owners.                                              -->
<!-- **********************************************************************-->
<section xml:id="S-Precalc-OtherCoordSystems">
  <title>Polar, Cylindrical, and Spherical Coordinates</title>
  
    <objectives>
        <ul>
          <li>
            <p>
              What are the polar coordinates of a point, and how are they related to rectangular coordinates?
            </p>
          </li>
          
          <li>
            <p>
              How can we convert coordinates of points or equations between rectangular and polar coordinates?
            </p>
          </li>

          <li>
            <p>
              What are the cylindrical coordinates of a point, and how are they related to rectangular coordinates?
            </p>
          </li>


          <li>
            <p>
              What are the spherical coordinates of a point, and how are they related to Cartesian coordinates?
            </p>
          </li>

          
          <li>
            <p>
              How can we convert coordinates of points or equations between rectangular and spherical coordinates?
            </p>
          </li>
        </ul>
    </objectives>

    <introduction>
<exploration>
  <task>
    <statement>
      <p>
        State what quadrants the output of sine is positive, what quadrants the output of sine is negative, and where the output of sine is zero.
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        State what quadrants the output of cosine is positive, what quadrants the output of cosine is negative, and where the output of cosine is zero.
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        State what quadrants the output of tangent is positive, what quadrants the output of tangent is negative, where the output of tangent is zero, and where the output of tangent is undefined.
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <figure xml:id="PA-OtherCoord-task4-plot">
        <caption>A plot of point <m>P</m> with <m>y</m>, <m>z</m>, and <m>r</m> labeled</caption>
        <interactive xml:id="interactive-othercoord1" platform="sage" width="100%" aspect="1:1">
          <slate surface="sage">
            from sage.plot.plot3d.plot3d import axes
            var('t,s')
            scale=6
            plot1=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
            plot1+=line3d([(4,0,0),(4,3,0)],color="red",linestyle="--")+text3d("3",(4.5,1.5,-.5),color="red",fontsize=15)
            plot1+=line3d([(0,0,0),(4,3,0)],color="blue",linestyle="--")+text3d("5",(2.5,1.25,0),color="blue",fontsize=15)
            plot1+=line3d([(3.75,0,0),(3.75,0.25,0),(4,0.25,0)],color="black")
            plot1+=line3d([(4,3,0),(4,3,2)],color="green")+text3d("2",(4,3.2,1),color="green")
            plot1+=point3d((4,3,2),color="black")+text3d("P",(4,3.2,1.9),color="black")
            show(plot1.rotate((0,0,1),1.4),aspect_ratio=1)
          </slate>
        </interactive>
      </figure>
      <p>
        Given the plot of point <m>P</m> in <xref ref="PA-OtherCoord-task4-plot" />, use trigonometry and the distance formula to find the following:
      </p>
      <task>
        <statement>
          <p>
            Find the x-coordinate of <m>P</m>. 
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Find the angle between the x-axis and the blue line segment. 
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Find the distance between the origin and <m>P</m>.
          </p>
        </statement>
      </task>
    </statement>
  </task>
  <task>
    <statement>
      <figure xml:id="PA-OtherCoord-task5-plot">
        <caption>A plot of point <m>P</m> with <m>y</m>, <m>z</m>, and <m>r</m> labeled</caption>
        <interactive xml:id="interactive-othercoord2" platform="sage" width="100%" aspect="1:1">
          <slate surface="sage">
            from sage.plot.plot3d.plot3d import axes
            var('t,s')
            scale=6
            plot2=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
            plot2+=line3d([(0,0,0),(-5,0,0)],color="gray",linestyle='--')+line3d([(0,0,0),(0,-5,0)],color="gray",linestyle='--')
            plot2+=line3d([(-3,0,0),(-3,-2,0)],color="red",linestyle="--")+text3d("2",(-3.5,-1,-.5),color="red",fontsize=15)
            plot2+=line3d([(0,0,0),(-3,-2,0)],color="blue",linestyle="--")+text3d("3",(-2,-1,0),color="blue",fontsize=15)
            plot2+=line3d([(-3,-2,0),(-3,-2,-1)],color="green")+text3d("1",(-3.2,-2,-0.8),color="green")
            plot2+=point3d((-3,-2,-1),color="black")+text3d("P",(-3.3,-2,-1.5),color="black")
            plot2+=line3d([(0,0,0,),(-3,-2,-1)],color="pink")
            show(plot2.rotate((-0.1,0,1),-1.3),aspect_ratio=1)
          </slate>
        </interactive>
      </figure>
      <p>
        Given the plot of point <m>P</m> in <xref ref="PA-OtherCoord-task5-plot" />, use trigonometry and the distance formula to find the following:
      </p>
      <task>
        <statement>
          <p>
            Find the x-coordinate of <m>P</m>. 
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Find the angle between the <m>z</m>-axis and the pink line segment. 
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Find the distance between the origin and <m>P</m>.
          </p>
        </statement>
      </task>
    </statement>
  </task>
</exploration>
<p>
  In this section we will define and work with a few new ways to specify the location of a point. These new measurements will be useful as coordinate systems and as a way of thinking about how to describe different shapes relative to rotational or other symmetries.
</p>
</introduction>
<subsection xml:id="subsec-polar">
  <title>Polar Coordinates</title>
  <p>
    We define the rectangular coordinates to be signed distances from the point to the axes as shown below.
  </p>
  <figure xml:id="coord2d-measurement2">
    <caption>A plot with the 2D coordinate measurements labeled</caption>
    <image width="55%" xml:id="img-coord2d-measurement2">
      <description> A plot with the 2D coordinate measurements labeled for a point in the first quadrant and a point in the fourth quadrant </description>
      <sageplot>
        var('t')
        plot3=point((3,1),color="black",size=20,axes=True,axes_labels=["$x$","$y$"],ticks=[[],[]])
        plot3+=line([(0,1),(3,1)],color="red")+line([(3,0),(3,1)],color="blue")
        plot3+=text("$a$",(1.5,1.3),color="red",fontsize=20)+text("$b$",(3.3,0.5),color="blue",fontsize=20)
        plot3+=text("$P=(a,b)$",(3.3,1.3),color="black",fontsize=20)+text("$Q=(c,d)$",(2.3,-2.3),color="black",fontsize=20)
        plot3+=point((2,-2),color="black",size=20)
        plot3+=line([(0,-2),(2,-2)],color="red")+line([(2,0),(2,-2)],color="blue")
        plot3+=text("$c$",(1,-1.3),color="red",fontsize=20)+text("$d$",(2.3,-1),color="blue",fontsize=20)
        show(plot3,xmin=-2,xmax=4,ymin=-2,ymax=4,aspect_ratio=1)
        </sageplot>
    </image>
  </figure>
  <p>
    We define the <term>polar coordinates</term> of a point in two dimensions to be the signed distance from the origin to the point, denoted <m>r</m>, and the angle from the positive horizontal axis and the line segment connecting the origin and <m>P</m>, denoted <m>\theta</m>. The angle <m>\theta</m> is measured with the counterclockwise direction being positive. 
  </p>
  <figure xml:id="coord2d-2">
    <caption>A plot with polar coordinate measurements labeled</caption>
    <image width="55%" xml:id="img-coord2d-2">
      <description> A plot with polar coordinate measurements labeled for a point in the first quadrant </description>
      <sageplot>
        var('t')
        plot4=point((2,4),color="black",size=20,axes=True,axes_labels=["$x$","$y$"],ticks=[[],[]])
        plot4+=line([(2,4),(0,0)],color="red")+text("$r$",(1,2.5),color="red",fontsize=20)
        a=arctan(2)
        plot4+=parametric_plot((cos(t),sin(t)),(t,0,a),color="blue")+text("$\theta$",(1.5,1),color="blue",fontsize=20)
        plot4+=text("$P=(r,\theta)$",(2.3,4.3),color="black",fontsize=20)
        plot4+=arrow((cos(a-.1),sin(a-.1)),(cos(a),sin(a)),color="blue")
        show(plot4,xmin=-1,xmax=3,ymin=-1,ymax=5,aspect_ratio=1)
      </sageplot>
    </image>
  </figure>
  <p>
    A helpful way to visualize a location based on polar coordinates is to 1)stand at the origin, facing the positive horizontal axis, 2) turn <m>\theta</m> (with positive being the counterclockwise direction), and 3) move <m>r</m> in the direction you are facing.
  </p>
  <example>
    <p>
      Our first example will look at the location given by <m>P=(r,\theta)=(2,\frac{\pi}{2})</m>. To understand where this point is, we do the following steps: 1) go to the origin and face the positive <m>x</m>-axis, 2) turn <m>\frac{\pi}{2}</m> counterclockwise (to the positive <m>y</m> axis), and 3) move two units.
    </p>
    <sidebyside>
      <figure xml:id="polarex1">
        <caption>Starting orientation of polar coordinates</caption>
        <image width="55%" xml:id="img-plarex1">
          <description> Starting orientation of polar coordinates </description>
          <sageplot>
            plot5=arrow((0,0),(1,0),color="black",axes=True,axes_labels=["$x$","$y$"],ticks=[[],[]])
            plot5+=text("Face this way",(1,0.25),fontsize=10,color="black")
            show(plot5,xmin=-1,xmax=3,ymin=-1,ymax=3,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
      <figure xml:id="polarex2">
        <caption>Rotate by <m>\frac{\pi}{2}</m> counterclockwise</caption>
        <image width="55%" xml:id="img-polarex2">
          <description> Rotate by <m>\frac{\pi}{2}</m> counterclockwise </description>
          <sageplot>
            var('t')
            plot6=arrow((0,0),(0,1),color="black",axes=True,axes_labels=["$x$","$y$"],ticks=[[],[]])
            plot6+=text("Face this way",(0.15,1.1),fontsize=10,color="black")
            plot6+=parametric_plot((0.5*cos(t),0.5*sin(t)),(t,0,pi/2),color="blue")+arrow((0.5*cos(pi/2-.1),0.5*sin(pi/2-.1)),(0,0.5),color="blue")
            show(plot6,xmin=-1,xmax=3,ymin=-1,ymax=3,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
      <figure xml:id="polarex3">
        <caption>3) Move two units in this direction</caption>
        <image width="55%" xml:id="img-polarex3">
          <description>  </description>
          <sageplot>
            var('t')
            plot7=line([(0,0),(0,2)],color="red",thickness=5,axes=True,axes_labels=["$x$","$y$"],ticks=[[],[]])+text("2",(-0.2,1),color="red",fontsize=15)
            plot7+=parametric_plot((0.5*cos(t),0.5*sin(t)),(t,0,pi/2),color="blue")+arrow((0.5*cos(pi/2-.1),0.5*sin(pi/2-.1)),(0,0.5),color="blue")
            plot7+=text("$\\theta$",(0.7,0.7),color="blue",fontsize=15)
            plot7+=point((0,2),color="black",size=20)+text("$P=(r,\\theta)=(2,\\pi/2)$",(0,2.2),color="black")
            show(plot7,xmin=-1,xmax=3,ymin=-1,ymax=3,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
    </sidebyside>
    <p>
      Geometrically, we can see that this location would have rectangular coordinates of <m>(x,y)=(0,2)</m>. While geometry is useful for understanding meaning, it is rarely wise to compute things like coordinates using geometric tools. In the next part, we will talk about algebraic tools that will allow us to convert between rectangular and polar coordinates.

    </p>
  </example>
  <assemblage xml:id="rect-polar">
    <title>Converting between Recangular and Polar coordinates</title>
  <p>
    <ul>
      <li>
        <title>Converting from Polar to Rectangular</title>
        <p>
          If we are given the Polar coordinates <m>(r,\theta)</m> of a point <m>P</m>, then the rectangular coordinates <m>(x,y)</m> of <m>P</m> satisfy
          <me>
          x = r \cos(\theta) \ \ \ \ \ y = r \sin(\theta) 
          </me>
        </p>
      </li>

      <li>
        <title>Converting from rectangular to polar</title>
        <p>
          If we are given the rectangular coordinates <m>(x,y)</m> of a point <m>P</m>, then the polar coordinates <m>(r,\theta)</m> of <m>P</m> satisfy
          <me>
          r^2  = x^2  + y^2 \ \ \ \ \ \tan(\theta) = \frac{y}{x} 
          </me>
          assuming <m> x \neq 0</m>.
        </p>
      </li>
    </ul>
  </p>
  </assemblage>
  <p>
    It is important to notice that the equations used in the conversion from polar to rectangular (<m>x=r \cos(\theta)</m> and <m>y=r \sin(\theta)</m>) work to convert coordinates of a point for any values of <m>r</m> and <m>\theta</m>, including negative <m>r</m>-values and values of <m>\theta</m> outside the interval <m>[0,2\pi]</m>. The coversion equations to go from rectangular to polar require you to interpret the results of your calculation because we are not able to solve explicitly for <m>r</m> and <m>\theta</m> in terms of <m>x</m> and <m>y</m>. This is because there is not a unique set of polar coordinates for a location. A point can have many different polar coordinates that refer to the same location. For example, the point with rectangular coordinates <m>(-1,-1)</m> can be given the polar coordintes <m>(r,\theta)=(\sqrt{2},\frac{5\pi}{4})</m> or <m>(r,\theta)=(-\sqrt{2},\frac{-\pi}{4})</m> or <m>(r,\theta)=(\sqrt{2},\frac{13\pi}{4})</m> or <m>(r,\theta)=(\sqrt{2},-\frac{3\pi}{4})</m> or <m>(r,\theta)=(-\sqrt{2},-\frac{7\pi}{4})</m> or ... The good news is that when you need to choose appropriate <m>r</m> and <m>\theta</m> your experience with quadrants and where the point is (in terms of <m>x</m> and <m>y</m>) gives the necessary information to make proper choices. 
  </p>

<example>
  <p>
    In this example, we will look at how to convert the points with rectangular coordinates <m>P=(-2,3)</m> and <m>Q=(-3,-2)</m> into polar coordinates. Note here that <m>P</m> is in the second quadrant and <m>Q</m> is in the third quadrant. Using the conversion equations for <m>P=(-2,3)</m>, we see that
    <me>
      r^2  = (-2)^2  + (3)^2 \ \ \ \ \ \tan(\theta) = -\frac{3}{2} 
      </me>
    which means we need to pick <m>r</m> to be either <m>\pm \sqrt{13}</m>. We will need to pick an appropriate angle for these possible <m>r</m>-values that satisfy <m>\tan(\theta) = -\frac{3}{2}</m>. There are angles in the fourth and second quadrants that will satisfy <m>\tan(\theta) = -\frac{3}{2}</m>, namely <m>\arctan(-\frac{3}{2})</m> and <m> \pi +\arctan(-\frac{3}{2})</m>. You could also choose any angle coterminal to either of these angles. This is not a situation where any of the choices of <m>r</m> will work with any choice of <m>\theta</m>. We  need to interpret these choices together to get a description for the correct location. If you want to choose <m>r=\sqrt{13}</m> then you will need to select the angle that cooresponds to the second quadrant, <m>\pi = \arctan(-\frac{3}{2})</m>, to get polar coordinates <m>P=(r,\theta)=(\sqrt{13},\pi+\arctan(-\frac{3}{2}))</m>. If you wanted to not have to use the complementary angle to <m>\arctan(-\frac{3}{2})</m>, you will need to use the negative value of <m>r</m> to get <m>P=(r,\theta)=(-\sqrt{13},\arctan(-\frac{3}{2}))</m>.
  </p>
  <sidebyside>
    <figure xml:id="rectpolarex1">
      <caption>A visualization of <m>P</m> with polar coordinates <m>(\sqrt{13},\arctan(-\frac{3}{2}))</m></caption>
      <image width="55%" xml:id="img-rectpolarex1">
        <description>  </description>
        <sageplot>
          var('t')
          plot9=line([(0,0),(-2,3)],color="red",thickness=5,axes=True,axes_labels=["$x$","$y$"])+text("$-\sqrt{13}$",(-2,1),color="red",fontsize=15)
          plot9+=parametric_plot((1.5*cos(t),1.5*sin(t)),(t,arctan(-1.5),0),color="blue")+arrow((1.5*cos(arctan(-1.5)+.01),1.5*sin(arctan(-1.5)+.01)),(1.5*cos(arctan(-1.5)),1.5*sin(arctan(-1.5))),color="blue")
          plot9+=point((-2,3),color="black",size=10)+text("$P$",(-1.5,3),color="black")
          plot9+=line([(0,0),(4,-6)],color="blue",linestyle="--")+text("$\\arctan(-\\frac{3}{2})$",(2.5,-1),color="blue",fontsize=15)
          show(plot9,xmin=-4,xmax=4,ymin=-4,ymax=4,aspect_ratio=1) 
        </sageplot>
      </image>
    </figure>
    <figure xml:id="rectpolarex2">
      <caption>A visualization of <m>P</m> with polar coordinates <m>(-\sqrt{13},\arctan(\pi-\frac{3}{2}))</m></caption>
      <image width="55%" xml:id="img-rectpolarex2">
        <description>
          A 2D plot of the point with polar coordinates <m>(-\sqrt{13},\arctan(\pi-\frac{3}{2}))</m>
        </description>
        <sageplot>
          var('t')
          plot8=line([(0,0),(-2,3)],color="red",thickness=5,axes=True,axes_labels=["$x$","$y$"])+text("$\sqrt{13}$",(-2,1),color="red",fontsize=15)
          plot8+=parametric_plot((cos(t),sin(t)),(t,0,pi+arctan(-1.5)),color="blue")+arrow((cos(pi+arctan(-1.5)-.01),sin(pi+arctan(-1.5)-.01)),(cos(pi+arctan(-1.5)),sin(pi+arctan(-1.5))),color="blue")
          plot8+=parametric_plot((1.5*cos(t),1.5*sin(t)),(t,arctan(-1.5),0),color="green")+arrow((1.5*cos(arctan(-1.5)+.01),1.5*sin(arctan(-1.5)+.01)),(1.5*cos(arctan(-1.5)),1.5*sin(arctan(-1.5))),color="green")
          plot8+=point((-2,3),color="black",size=20)+text("$P$",(-1.5,3),color="black")
          plot8+=line([(0,0),(4,-6)],color="green",linestyle="--")+text("$\\arctan(-\\frac{3}{2})$",(2.5,-1),color="green",fontsize=15)
          plot8+=text("$\\pi-\\arctan(-\\frac{3}{2})$",(2,1.25),color="blue",fontsize=15)
          show(plot8,xmin=-4,xmax=4,ymin=-4,ymax=4,aspect_ratio=1)
        </sageplot>
      </image>
    </figure>
  </sidebyside>
  <p>
    Remember that inverse trig functions have limited domains and ranges, the <m>r</m>-coordinate can be positive or negative, and polar coordinates do not have unique values for a given point.
  </p> 
</example>
<activity>
  <introduction>
    <p>
      For each of the points listed below, you should:
      <ul>
        <li>
          Graph the point on a set of axes and label how each of the rectangular coordinates is measured.
        </li>
        <li>
          Draw and label how the polar coordinates are measured for each point.
        </li>
        <li>
          Compute the exact value of <m>r</m> and <m>\theta</m> for each point. Exact values include things like <m>\sqrt{3}</m>, <m>\arcsin(3/4)</m>, etc. You should simplify the trig function values of any common angles you encounter, like <m>\sin(\frac{\pi}{3})=\frac{\sqrt{3}}{2}</m>.
        </li>
      </ul>
    </p>
  </introduction>
  <task>
    <statement>
      <p>
        <m>(x,y)=(-3,-7)</m>
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        <m>(x,y)=(7,-3)</m>
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        <m>(x,y)=(\sqrt{5},-2)</m>
      </p>
    </statement>
  </task>
  <task xml:id="translatedcircpt1">
    <statement>
      <p>
        <m>(x,y)=(\frac{3}{2},-\frac{3}{2})</m>
      </p>
    </statement>
  </task>
  <task xml:id="translatedcircpt2">
    <statement>
      <p>
        <m>(x,y)=(\frac{3}{2},\frac{3}{2})</m>
      </p>
    </statement>
  </task>
</activity>
<activity>
  <introduction>
    <p>
      For each of the points listed below, you should:
      <ul>
        <li>
          Graph the point on a set of axes and label how each of the polar coordinates is measured.
        </li>
        <li>
          Draw and label how the rectangular coordinates are measured for each point.
        </li>
        <li>
          Compute the exact value of <m>x</m> and <m>y</m> for each point. Exact values include things like <m>\sqrt{3}</m>, <m>\arcsin(3/4)</m>, etc. You should simplify the trig function values of any common angles you encounter, like <m>\sin(\frac{\pi}{3})=\frac{\sqrt{3}}{2}</m>.
        </li>
      </ul>
    </p>
  </introduction>
  <task>
    <statement>
      <p>
        <m>(r,theta)=(1,-\frac{\pi}{6})</m>
      </p>
    </statement>
  </task>
  <task xml:id="translatedcircpt3">
    <statement>
      <p>
        <m>(r,theta)=(\sqrt{3},\arctan(\frac{\sqrt{2}{2}}))</m>
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        <m>(r,theta)=(-\sqrt{5},0)</m>
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        <m>(r,theta)=(7,\frac{3\pi}{4})</m>
      </p>
    </statement>
  </task>
  <task>
    <statement>
      <p>
        <m>(r,theta)=(3,\pi-\frac{\pi}{6})</m>
      </p>
    </statement>
  </task>
</activity>
<p>
  We now want to look at converting an equation between rectangular and polar coordinates. Remember that the graph of an equation is the set of all points that satisfy the equation, so when we say that we want to convert an equation, like <m>x=y^2</m> to polar coordinates, we meant that we want to find an equation in <m>r</m> and <m>\theta</m> whose graph will be exactly the same set of points as <m>x=y^2</m>. This will be fairly easy because we have conversion equations that are solved explicitly for <m>x</m> and <m>y </m> (<m>x=r\cos(\theta)</m> and <m>y=r\sin(\theta)</m>) and do not require interpretation.
</p>  
<example>
  <p>
    We can convert the equation <m>x=y^2</m> to polar coordinates by substituting <m>x=r\cos(\theta)</m> and <m>y=r\sin(\theta)</m> to get
    <md>
      <mrow>x =\amp y^2 </mrow>
      <mrow>r \cos(\theta) =\amp (r \sin(\theta)^2) </mrow>
      <mrow>r \cos(\theta) =\amp r^2 \sin(\theta)^2 </mrow>
      <mrow> \frac{\cos(\theta)}{\sin(\theta)^2} =\amp r</mrow>
      <mrow> r =\amp \cot(\theta) \csc(\theta)</mrow>
    </md>
    So, the <m>(r,\theta)</m> points that satisfy <m> r = \cot(\theta) \csc(\theta)</m> are the same locations as the <m>(x,y)</m> points that satisfy <m>x=y^2</m>. <alert>Except</alert>, we divided by <m>\sin(\theta)</m>, which will not give an equivalent equation if <m>\sin(\theta)=0</m>.  Notice that if <m>\theta=0</m> (or any integer multiple of <m>\pi</m>), then <m> \cot(0) \csc(0)</m> does not exist. So in a technical sense, we would either need to stop our algebra at <m> cos(\theta)=r \sin(\theta)^2</m> or use a piecewise defined expression like
    <me>
      r= \left\{
        \begin{array}{ll}
          0 \amp \amp \theta=0 \\
          \cot(\theta) \csc(\theta) \amp \amp \theta\neq 0   
        \end{array} 
        \right.  
    </me>
    This examples highlights the tricky part of converting equations; Without careful algebraic steps, you can miss points or get nonsensical statements. Often we will use geometric intuition and information to help convert equations between coordinate systems and make sense of the resulting expressions.
  </p>
</example>
<example xml:id="eqnconversion2">
  <p>
    In this example, we will convert the equation <m>r=3\cos(\theta)</m> into rectangular coordinates, identify the shape of its graph, and plot the graph of this equation. Remember that we do not have explicit conversion equations for <m>r</m> and <m>\theta</m>, but we do have some equations, like <m>r^2=x^2+y^2</m> which will allow us to convert to an expression in <m>x</m> and <m>y</m> that does not require intepretation. Let's try to square both sides of our polar equation, since this will give us an expression on the left hand side of the equation that will be easy to conver to rectangular coordinates.
    <me> r =3\cos(\theta) \Rightarrow r^2=9 (\cos(\theta))^2 \Rightarrow x^2+y^2 = 9  (\cos(\theta))^2 </me>
    Our last equation is a mix of rectangular and polar coordinates so we are not done with our coversion to rectangular (just <m>x</m> and <m>y</m>) coordinates. Unfortunately the easiest way to convert <m>(\cos(\theta))^2</m> to rectangular is to use 
    <me> x=r \cos(\theta) \Rightarrow (\cos(\theta))^2=\frac{x^2}{r^2} \Rightarrow (\cos(\theta))^2=\frac{x^2}{x^2+y^2} </me>
    which will give us a rational expression for our conversion. This wil require some extra algebra and interpretation, so let's try a slightly different approach. Instead of squaring both sides of our polar equation, what if we multiply both sides by <m>r</m>. You may have seen this as a better approach from the start or gained this insight after our work above. Remember, there are multiple paths to insight and being able to incorporate new ideas and information to form new strategies is a vital skill to solving interesting and realistic problems. So, if we multiple both sides of our original equation by <m>r</m>, then we get
    <me>  r =3\cos(\theta) \Rightarrow r^2=3 r \cos(\theta) </me>
    This equation is great because both the left and right hand sides have conversions to rectangular coordinates that do NOT require interpretation or cases. So, the <m>(r,\theta)</m> points that satisfy <m> r = 3 cos(\theta)</m> are the same locations as the <m>(x,y)</m> points that satisfy <m>x^2+y^2=3x</m>. 
  </p>
  <p>
    We have now converted our polar equation to a rectangular equation. What shape will the graph of <m>x^2+y^2=3x</m> (or <m> r = 3 cos(\theta)</m>) be? A translated circle that we can do some algebra (complete the square technique) to put into the the standard form of a circle (<m> (x-h)^2+(y-k)^2 = R^2</m>). 
    <md>
      <mrow>x+y^2=3x  \amp\Rightarrow \amp x -3x \amp \amp +y^2 \amp=0  </mrow>
      <mrow>          \amp \amp x -3x \amp+\frac{9}{4} \amp +y^2 \amp=0+\frac{9}{4}</mrow>
      <mrow>          \amp \amp (x -\frac{3}{2})^2 \amp \amp +(y-0)^2 \amp=\left(\frac{3}{2}\right)^2</mrow>
    </md>
    We can see now that this circle will have center <m>(\frac{3}{2},0)</m> and radius <m>\frac{3}{2}</m>. The graph of <m>r =3\cos(\theta)</m> is the same as <m>x+y^2=3x</m> or <m>(x -\frac{3}{2})^2  +(y-0)^2 =\left(\frac{3}{2}\right)^2</m> which has the graph
  </p>
  <figure xml:id="converteqnex2">
    <caption>A plot of <m>r=3\cos(\theta)</m></caption>
    <image width="75%" xml:id="img-converteqn2">
      <description>   </description>
      <sageplot>
        var('t')
        plot10=parametric_plot((1.5*cos(t)+1.5,1.5*sin(t)),(t,0,2*pi),thickness=3,color="black",axes=True,axes_labels=["$x$","$y$"],gridlines=True)
        show(plot10,xmin=-1,xmax=4,ymin=-2,ymax=2,aspect_ratio=1)
      </sageplot>
    </image>
  </figure>
  <p>
    While many people will find the rectangular equation more comfortable to graph and explain, this conversion is not always needed. You can find many resources on plotting points of a polar equation without converting to rectangular coordinates, especially when one coordinate (typically <m>r</m>) is solved explicitly in terms of the other coordinate.
  </p>
</example>


<p>
  You can see that both of the rectangular and polar coordinates of the points in <xref ref="translatedcircpt1" />, <xref ref="translatedcircpt2" />, and <xref ref="translatedcircpt3" /> will satisfy the equations of <xref ref="eqnconversion2" />. The plot below shows how you can visualize <xref ref="translatedcircpt3" />.
</p>
<figure xml:id="converteqnex3">
  <caption>A plot of <m>r=3\cos(\theta)</m> with the polar coordinate measurements of <xref ref="translatedcircpt3" /></caption>
  <image width="75%" xml:id="img-converteqn3">
    <description>   </description>
    <sageplot>
      var('t')
      plot11=parametric_plot((1.5*cos(t)+1.5,1.5*sin(t)),(t,0,2*pi),thickness=2,color="black",axes=True,axes_labels=["$x$","$y$"],gridlines=True)
      plot11+=line([(0,0),(1.5,-1.5)],color="blue",thickness=2)+text("$P=(r,\\theta) \\ =(\\sqrt{3},-\\arctan(\\frac{\\sqrt{2}}{2}))$",(1.5,-1.75),fontsize=15,color="blue")
      plot11+=point((1.5,-1.5),size=5,color="blue")+text("$-\\arctan(\\frac{\\sqrt{2}}{2})$",(1.2,-0.3),color="blue")
      plot11+=parametric_plot((.7*cos(t),.7*sin(t)),(t,-pi/4,0),color="blue")+arrow((.7*cos(0.1-pi/4),.7*sin(0.1-pi/4)),(.7*cos(-pi/4),.7*sin(-pi/4)),color="blue")
      show(plot11,xmin=-1,xmax=4,ymin=-2,ymax=2,aspect_ratio=1)
    </sageplot>
  </image>
</figure>
<activity>
  <introduction>
    <p>
      The following activity will take you through how to create a graph of an equation in <m>r</m> and <m>\theta</m>.
    </p>
  </introduction>
  <task>
    <p>
      Draw a graph of <m> y=\cos(x)</m> for at least <m> 0 \leq x \leq 2 \pi</m>.
    </p>
  </task>
  <task>
    <p>
      For each value of <m>\theta</m> listed below, compute the value of <m>r</m> corresponding to <m> r=\cos(\theta)</m>.
    <me>
    \theta = 0, \frac{\pi}{6}, \frac{\pi}{4},\frac{\pi}{3},\frac{\pi}{2},\frac{3\pi}{4},\pi,\frac{5\pi}{4},\frac{3\pi}{2},\frac{7\pi}{4},2\pi
    </me>
  </p>
  </task>
  <task>
    <p>Plot each of the eleven points you found in the previous part on the polar plane and connect them to make a plot of the graph of <m>r=\cos(\theta)</m>.</p>
  </task>
  <task>
    <p>Graph the equation <m>r=1+\cos(\theta)</m> in the polar plane.</p>
    </task>
    <task>
      <p>Graph the equation <m>r=1-\cos(\theta)</m> in the polar plane.</p>
    </task>
    <task>
      <p>What are the points of intersections for the graphs of <m>r=1+\cos(\theta)</m> and <m>r=1-\cos(\theta)</m></p>
    </task>
  </activity>
  <activity>
    <introduction>
      <p>
        For each of the equations given below, do each of the following:
        <ol>
          <li>
              Convert the equation to the other coordinate system (either rectangular to polar or polar to rectangular).
          </li>
          <li>
            State the shape of the graph for the equation and any other information needed to graph
          </li>
          <li>
            Graph the given equation and write a description for how the converted equation (from part a) makes sense in terms of your graph.
          </li>
        </ol>
      </p>
      </introduction>
      <task>
        <statement>
          <p>
            <m>r=2</m>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            <m>\theta=\frac{\pi}{3}</m>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            <m>x=-1</m>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            <m>y=2</m>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            <m>y=-x</m>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            <m>r=\frac{3}{1-2\cos(\theta)}</m>
          </p>
        </statement>
      </task>
  </activity>
  <p>
    In <xref ref="coord2d-PA" />, you saw how easy it was to read rectangular coordinates of a point when you had a rectangular grid. A polar point grid gives the same tools by plotting an array of constant coordinate graphs. An example of a polar grid is given below.
  </p>
  <figure xml:id="polargrid">
    <caption>A polar grid (from https://commons.wikimedia.org/wiki/File:Polar_coordinates_grid.svg)</caption>
    <image source="./images/Polar_coordinates_grid.png">
      <shortdescription>(for accessibility)</shortdescription>
    </image>
  </figure>
  <activity>
    <task>
      <statement>
        <p>
          Write a few sentences to describe what the graph of <m>r=c</m> looks like, where <m>c</m> is a constant. You should consider what values of <m>c</m> will correspond to different shapes.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Write a few sentences to describe what the graph of <m>\theta=d</m> looks like, where <m>d</m> is a constant. You should consider what values of <m>d</m> will correspond to different shapes.
        </p>
      </statement>
    </task>
  </activity>
  <p>
    The last idea of conversion we will look at between rectangular and polar coordinates is how to convert regions or inequalities between coordinate systems. Just as a graph of a an equation is a plot of the set of points that satisfies the equation, the graph of an inequality (or set of inequalities) is the region of points that satisfy the inequality. 
  </p>
  <example>
    <p>
      The graph of the inequality <m> -1\leq x \leq 1</m> is the vertical strip of points with horizontal coordinate between negative one and one (inclusive) and has graph given by 
    </p>
    <figure xml:id="convertreg1">
      <caption>A plot of <m> -1\leq x \leq 1</m> </caption>
      <image width="75%" xml:id="img-convertreg1">
        <description>   </description>
        <sageplot>
          plot12=line([(-1,-5),(-1,5)],color="black",thickness=2,axes=True,axes_labels=["$x$","$y$"],gridlines=True)
          plot12+=line([(1,-5),(1,5)],color="black",thickness=2)+polygon([(-1,-5),(-1,5),(1,5),(1,-5),(-1,-5)],color="green")
          show(plot12,xmin=-3,xmax=3,ymin=-3,ymax=3,aspect_ratio=1)
        </sageplot>
      </image>
    </figure>
    <p>
      If we consider the set of inequalities given by <m> -1\leq x \leq 1</m> and <m> 0\leq y \leq 2</m>, then we are looking for the region of points that satisfies both inequalities. The second inequality is shown in red on the left plot and the intersection of the two plots corresponds to the region described by <m> -1\leq x \leq 1</m> and <m> 0\leq y \leq 2</m>, which is plotted in blue on the right below.
    </p>
    <sidebyside>
      <figure xml:id="convertreg2">
        <caption>A plot of <m> 0\leq y \leq 2</m> </caption>
        <image width="75%" xml:id="img-convertreg2">
          <description>   </description>
          <sageplot>
            plot13=line([(-5,0),(5,0)],color="black",thickness=2,axes=True,axes_labels=["$x$","$y$"],gridlines=True)
            plot13+=line([(-5,2),(5,2)],color="black",thickness=2)+polygon([(-5,0),(5,0),(5,2),(-5,2),(-5,0)],color="red")
            show(plot13,xmin=-3,xmax=3,ymin=-3,ymax=3,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
      <figure xml:id="convertreg3">
        <caption>A plot of <m> -1\leq x \leq 1</m> and <m> 0\leq y \leq 2</m></caption>
        <image width="75%" xml:id="img-convertreg3">
          <description>   </description>
          <sageplot>
            plot14=line([(-5,0),(5,0)],color="black",thickness=2,axes=True,axes_labels=["$x$","$y$"],gridlines=True)
            plot14+=line([(-5,2),(5,2)],color="black",thickness=2)+polygon([(-5,0),(5,0),(5,2),(-5,2),(-5,0)],color="red")
            plot14+=line([(-1,-5),(-1,5)],color="black",thickness=2,axes=True,axes_labels=["$x$","$y$"],gridlines=True)
            plot14+=line([(1,-5),(1,5)],color="black",thickness=2)+polygon([(-1,-5),(-1,5),(1,5),(1,-5),(-1,-5)],color="green")
            plot14+=polygon([(-1,0),(1,0),(1,2),(-1,2),(-1,0)],color="blue")
            show(plot14,xmin=-3,xmax=3,ymin=-3,ymax=3,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
    </sidebyside>
  </example>
  <activity>
    <task>
      <statement>
        <p>
          Make a graph of the points that satisfy <m>y=x+1</m>.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Make a graph of the points that satisfy <m>y \geq x+1</m>.
        </p>
      </statement>
      <hint>
        <p>
          Will the points above or below the line you drew in the first part of this activity satisfy this inequality. 
        </p>
      </hint>
    </task>
    <task>
      <statement>
        <p>
          Make a graph of the points that satisfies the inequality <m>x^2+y^2 \leq 4</m>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Make a graph of the points that satisfies the inequalities <m>x^2+y^2 \leq 4</m> and <m>y \geq x+1</m>.
        </p>
      </statement>
    </task>
  </activity>
  <activity>
    <task>
      <statement>
        <p>
          Draw a plot of the region that cooresponds to the polar inequality <m> 1 \leq r \leq 3</m>. Write a sentence or two to describe this region.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Draw a plot of the region that cooresponds to the polar inequality <m> \frac{\pi}{4} \leq \theta \leq \frac{3\pi}{4}</m>. Write a sentence or two to describe this region.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Draw a plot of the region that cooresponds to the polar inequalities <m> 1 \leq r \leq 3</m>, <m> \frac{\pi}{4} \leq \theta \leq \frac{3\pi}{4}</m>. Write a sentence or two to describe this region.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Draw a plot of the region that cooresponds to the polar inequality <m> 1 \leq r \leq 3 \cos(\theta)</m>. Write a sentence or two to describe this region.
        </p>
      </statement>
    </task>
  </activity>

  </subsection>
  <subsection xml:id="subsec-cylindrical">
    <title>Cylindrical Coordinates</title>
    
    <p>
      We have encountered two different coordinate systems in <m>\R^2</m> <mdash/> the rectangular and polar coordinates systems <mdash/> and seen how in certain situations, polar coordinates form a convenient alternative. In a similar way, there are two additional  coordinate systems in <m>\R^3</m> that come from different ideas of rotational measurement. Given that we are already familiar with the Cartesian coordinate system for <m>\R^3</m>, we next investigate the cylindrical and spherical coordinate systems (each of which builds upon polar coordinates in <m>\R^2</m>). In what follows, we will see how to convert among the different coordinate systems (for coordinates, equations, and inequalities), and some situations in which these other coordinate systems prove advantageous.
    </p>

    <p>
      As we sw earlier, polar coordiantes will be an advantageous coordinate system when considering points/graphs/regions which have rotationally symmetric properties with respect to the origin. We can bring these ideas in 3D coordinates in two ways, cylindrical and spherical coordinates. <term>Cylindrical coordinates</term> are a coordinate system for <m>\mathbb{R}^3</m> that consists of using polar coordinates in place of <m>x</m> and <m>y</m> coordinates. Cylindrical coordinates are stated as <m>(r,\theta,z)</m> and are can be described as "polar plus z". The <m>z</m> coordinate is measured the same way as in rectangular coordinates (signed distance above or below the <m>xy</m>-plane) and polar coordinates are measured as a projection of the 3D point onto the <m>xy</m>-plane. For rectangular-cylindrical coordinates, we use the same conversion equations as rectangular-polar coordinates.
    </p>
    <figure xml:id="Cylindrical_coords_def">
      <caption>The cylindrical coordinates of a point</caption>
        <image source="images/fig_11_8_cylindrical"/>
    </figure>

    <assemblage xml:id="Cartesian-cylindrical">
      <title>Converting between Rectangular and Cylindrical coordinates</title>
    <p>
      <ul>
        <li>
          <title>Converting from Cylindrical to Rectangular</title>
          <p>
            If we are given the Cylindrical coordinates <m>(r,\theta,z)</m> of a point <m>P</m>, then the Rectangular coordinates <m>(x,y,z)</m> of <m>P</m> satisfy
            <me>
            x = r \cos(\theta) \ \ \ \ \ y = r \sin(\theta) \ \ \ \ \ \text{ and } \ \ \ \ \ z = z.
            </me>
          </p>
        </li>

        <li>
          <title>Converting from Rectangular to Cylindrical</title>
          <p>
            If we are given the Rectangular coordinates <m>(x,y,z)</m> of a point <m>P</m>, then the Cylindrical coordinates <m>(r,\theta,z)</m> of <m>P</m> satisfy
            <me>
            r^2  = x^2  + y^2 \ \ \ \ \ \tan(\theta) = \frac{y}{x} \ \ \ \ \ \text{ and } \ \ \ \ \ z = z,
            </me>
            assuming <m> x \neq 0</m>.
          </p>
        </li>
      </ul>
    </p>
    </assemblage>
    <example>
      <task>
        <statement>
          <p>
            For our first example, we will look at the point with cylindrical coordinates <m>(r,\theta,z)=(\sqrt{5},\frac{3\pi}{4},-2)</m>. This point is shown in the figure below with the measurements of the cylindrical coordinates.
          </p>
          <figure xml:id="cylex1">
            <caption>A plot of <m>(r,\theta,z)=(\sqrt{5},\frac{3\pi}{4},-2)</m></caption>
            <image width="75%" xml:id="img-cylex1">
              <description>   </description>
              <interactive xml:id="interactive-cylex1" platform="sage" width="100%" aspect="1:1">
                <slate surface="sage">
                  from sage.plot.plot3d.plot3d import axes
                  var('t')
                  scale=6
                  plot15=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("-2",(0,0,scale+0.5),fontsize=30)
                  plot15+=point3d((-sqrt(10)/2,sqrt(10)/2,-2),size=5,color="black")+line([(-sqrt(10)/2,sqrt(10)/2,-2),(-sqrt(10)/2,sqrt(10)/2,0)],color="green")
                  plot15+=text3d("z",(-sqrt(10)/2,2,-1),color="green")
                  plot15+=line([(-sqrt(10)/2,sqrt(10)/2,0),(0,0,0)],color="blue",thickness=2)+text3d("$\\sqrt{5}$",(-sqrt(10)/2,sqrt(10)/2-0.5,0),color="blue")
                  plot15+=parametric_plot3d((cos(t),sin(t),0),(t,0, 0.75*pi),color="red")+text3d("$0.75 \\pi$",(0.5,sqrt(10)/2,0),color="red")
                  plot15+=arrow3d((cos(0.75*pi-0.1),sin(0.75*pi-0.1),0),(-1/sqrt(2),1/sqrt(2),0),color="red",width=3)
                  show(plot15.rotate((0,0,1),1.4),aspect_ratio=1)
                </slate>
              </interactive>
            </image>
          </figure>
          <p>
            To convert our cylindrical coordinates to rectangular, we can use <m>x = r \cos(\theta) , y = r \sin(\theta)</m> to get rectangular coordinates of <m>(x,y,z)=(-\frac{\sqrt{10}}{2},\frac{\sqrt{10}}{2},-2)</m>.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            In this example we want to find a set of cylindrical coordinates for a point with rectangular coordinates <m>(x,y,z)=(-2,1,2)</m>. Remember that just as the polar coordinates of a point in 2D are not unique, the cylindrical coordinates of a point in 3D will not be unique. Using our conversion equations from rectangular to cylindrical, we get <m>r^2=(-2)^2+(1)^1=5</m> and <m>\tan(\theta)= \frac{1}{-2}</m>. Remember that we will need to interpret the angle and our choice of <m>r</m> to make sure our coordinates describe a point in the second octant. In particular, we will choose a positive <m>r</m> value of <m>\sqrt{5}</m> which means we will need to select an angle of <m>\arctan(-\frac{1}{2})+\pi</m>. Alterntatively, we can use <m>\cos(\theta)=\frac{x}{r}</m> since <m>/arccos</m> will give an output of an angle in the first or second quadrants. You can verify that <m>\theta = \arctan(-\frac{1}{2})+\pi = \arccos(-\frac{2}{\sqrt{5}})</m>. So rectangular coordinates <m>(x,y,z)=(-2,1,2)</m> will coorespond to cylindrical coordinates of <m>(r,\theta,z)= (\sqrt{5},\arctan(-\frac{1}{2})+\pi,2)</m> or <m>(r,\theta,z)= (\sqrt{5},\arccos(-\frac{2}{\sqrt{5}},2) )</m>.
          </p>
          <figure xml:id="cylex2">
            <caption>A plot of <m>(x,y,z)=(-2,1,2)</m></caption>
            <image width="75%" xml:id="img-cylex2">
              <description>   </description>
              <interactive xml:id="interactive-cylex2" platform="sage" width="100%" aspect="1:1">
                <slate surface="sage">
                  from sage.plot.plot3d.plot3d import axes
                  var('t')
                  scale=3
                  a=arccos(-2/sqrt(5))
                  plot16=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
                  plot16+=point3d((-2,1,2),size=10,color="black")+line([(-2,1,2),(-2,1,0)],color="green")+text3d("2",(-2,1.5,1),color="green",fontsize=20)
                  plot16+=line([(-2,1,0),(-2,0,0)],color="red")+text3d("1",(-2,0.5,0.25),color="red",fontsize=20)
                  plot16+=line([(0,0,0),(-2,0,0)],color="blue")+text3d("-2",(-1,0,0.25),color="blue",fontsize=20)
                  plot16+=line([(0,0,0),(-2,1,0)],color="purple")+text3d("$\\sqrt{5}$",(-1,1,0.25),color="purple",fontsize=20)
                  plot16+=parametric_plot3d((cos(t),sin(t),0),(t,0,a),color="orange",thickness=2)+text3d("$\\arccos(-2/\\sqrt{5})$",(1,1,0.25),color="orange",fontsize=20)
                  plot16+=arrow3d((cos(a-.1),sin(a-0.1),0),(cos(a),sin(a),0),color="orange",width=3)
                  show(plot16.rotate((0,0,1),1.4),aspect_ratio=1)
                </slate>
              </interactive>
            </image>
          </figure>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            In our earlier work, we saw how the graph of <m>\theta=2</m> will be a line with slope <m>\tan(2)</m>. If we consider only positive <m>r</m> coordinates then we get a ray with an angle of 2 radians from the positive <m>x</m>-axis. If we wanted to consider the graph of <m>\theta=2</m> as cylindrical coordinates (in 3D), then we get a plane that contains the <m>z</m>-axis and goes in the <m>\theta=2</m> direction. This is a cylinder surface with the line given by <m>y=tan(2) x</m> as the generating curve and rulings parallel to the <m>x</m>-axis.  
          </p>
          <figure xml:id="cylex3">
            <caption>A plot of <m>\theta=2</m> with positive <m>r</m> values in blue and negative <m>r</m> values in green</caption>
            <image width="75%" xml:id="img-cylex3">
              <description>   </description>
              <interactive xml:id="interactive-cylex3" platform="sage" width="100%" aspect="1:1">
                <slate surface="sage">
                  from sage.plot.plot3d.plot3d import axes
                  var('s,t')
                  scale=3
                  a=pi+arctan(2)
                  plot17=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
                  plot17+=parametric_plot3d((s,tan(a)*s,t),(t,-scale,scale),(s,-2,0),color="blue",opacity=.65)
                  plot17+=parametric_plot3d((s,tan(a)*s,t),(t,-scale,scale),(s,0,2),color="green",opacity=.65)
                  plot17+=parametric_plot3d((cos(t),sin(t),0),(t,0,a),color="red",thickness=3)+arrow3d((cos(a-0.1),sin(a-0.1),0),(cos(a),sin(a),0),color="red",width=5)
                  show(plot17.rotate((0,0,1),1.4),aspect_ratio=1)
                </slate>
              </interactive>
            </image>
          </figure>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            In this example we will convert the elliptic paraboloid given by <m>z=x^2+y^2</m> to cylindrical coordinates. Algebraically, this is very simple because we can substitute <m>r^2=x^2+y^2(\theta)</m> to get <m>z=r^2</m>. This should make sense for the graph of the elliptic paraboloid because the graph is rotationally symmetric around the <m>z</m>-axis (which comes from not having an explicit <m>\theta</m> dependence in the equation) and the height of the surface above the <m>xy</m>-plane increases quadratically as the location moves away from the <m>z</m>-axis.
          </p>
          <figure xml:id="cylex4">
            <caption>A plot of <m>\theta=2</m> with positive <m>r</m> values in blue and negative <m>r</m> values in green</caption>
            <image width="75%" xml:id="img-cylex4">
              <description>   </description>
              <interactive xml:id="interactive-cylex4" platform="sage" width="100%" aspect="1:1">
                <slate surface="sage">
                  from sage.plot.plot3d.plot3d import axes
                  var('s,t')
                  scale=2
                  a=1
                  plot18=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
                  plot18+=parametric_plot3d((s*cos(t),s*sin(t),s^2),(s,0,2),(t,0,2*pi),color="blue",opacity=.65)
                  plot18+=line([(0,0,0),(1.25*cos(a),1.25*sin(a),0)],color="red",thickness=3)+text3d("r",(1.25*cos(a),1.25*sin(a),-0.5),color="red",fontsize=20)
                  plot18+=line([(1.25*cos(a),1.25*sin(a),0),(1.25*cos(a),1.25*sin(a),1.25^2)],color="green",thickness=3)+text3d("z=r^2",(1.25*cos(a)+.5,1.25*sin(a)+.5,1),color="green",fontsize=20)
                  show(plot18.rotate((0,0,1),1.4),aspect_ratio=1)
                </slate>
              </interactive>
            </image>
          </figure>
        </statement>
      </task>
    </example>
    <activity>
      <task>
        <statement>
          <p>
            Convert <m>(x,y,z)=(1,2,3)</m> to cylindrical coordinates.
          </p>
        </statement>
      </task> 
      <task>
        <statement>
          <p>
            Describe the region given by the 6th octant in terms of inequalities for cylindrical coordinates.
          </p>
        </statement>
      </task> 
      <task>
        <statement>
          <p>
            Convert the basic cone, given by <m>z^2=x^2+y^2</m> to cylindrical coordinates. Write a couple of sentences to make sense of how you can simplify your conversion and describe the shape of the graph in terms of <m>z</m> and <m>r</m>.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Draw a plot of the surface given by <m>r=2</m>. Write a couple of sentences about the shape and properties of this surface.
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Draw a plot of the region given by <m>0 \leq \theta \leq \pi \quad , 0 \leq r \leq 2 \quad , 0 \leq z \leq r^2 </m>
          </p>
        </statement>
      </task>
    </activity>
    <p>
      These activities are meant not only to give you some algebraic experience with the cylindrical coordinate measurements, but also some examples where you should make sense of your results from a geometric perspective. 
    </p>
    <activity xml:id="CylCoorSurfaces">
      <statement> 
      <p>
        In this activity, we graph some surfaces using cylindrical coordinates. To improve your intuition and test your understanding, you should first think about what each graph should look like before you plot it using appropriate technology.
        <ol marker="a.">
          <li>
            <p>
              What familiar surface is described by the points in cylindrical coordinates with <m>r=2</m>, <m>0 \leq \theta \leq 2\pi</m>, and <m>0 \leq z \leq 2</m>?  How does this example suggest that we call these coordinates <em>cylindrical coordinates</em>? How does your answer change if we restrict <m>\theta</m> to <m> 0 \leq \theta \leq \pi</m>? 
            </p>
          </li>

          <li>
            <p>
              What familiar surface is described by the points in cylindrical coordinates with <m>\theta=2</m>, <m>0 \leq r \leq 2</m>, and <m>0 \leq z \leq 2</m>? 
            </p>
          </li>

          <li>
            <p>
              What familiar surface is described by the points in cylindrical coordinates with <m>z=2</m>, <m>0 \leq \theta \leq 2\pi</m>, and <m>0 \leq r \leq 2</m>? 
            </p>
          </li>

          <li>
            <p>
              Plot the graph of the cylindrical equation <m>z=r</m>, where <m>0 \leq \theta \leq 2\pi</m> and <m>0 \leq r \leq 2</m>. What familiar surface results?
            </p>
          </li>

          <li>
            <p>
              Plot the graph of the cylindrical equation <m>z= \theta</m> for <m>0 \leq \theta \leq 4 \pi</m>. What does this surface look like?
            </p>
          </li>
        </ol>
      </p>
      </statement>
      <solution>
        <p> 
        <ol marker="a.">
          <li>
            <p>
              In polar coordinates,
              the graph of <m>r=2</m> is a circle centered at the origin with radius 2.
              Extending this to cylindrical coordinates,
              we obtain a cylinder centered at the origin of radius 2, with base on the <m>xy</m>-plane and height 2.
            </p>
          </li>
          <li>
            <p>
              In polar coordinates, the graph of
              <m>\theta = 2</m> is a line through the origin making an angle of 2 radians with the positive <m>x</m>-axis.
              Extending this to cylindrical coordinates,
              the graph of <m>\theta=2</m> is a plane through the origin perpendicular to the <m>xy</m>-plane making an angle of 2 radians with the <m>xz</m>-plane.
            </p>
          </li>
          <li>
            <p>
              The graph of <m>z=2</m> is just a plane parallel to the <m>xy</m>-plane at a distance 2 above the <m>xy</m>-plane.
              With <m>0 \leq \theta \leq 2\pi</m> and <m>0 \leq r \leq 2</m>,
              the graph of <m>z=2</m> is just a disk of radius 2 centered at <m>(0,0,2)</m> within the plane <m>z=2</m>.
            </p>
          </li>
          <li>
            <p>
              For a fixed value of <m>r</m>,
              the graph of <m>z=r</m> and
              <m>0 \leq \theta \leq 2\pi</m> is a circle of radius <m>r</m> in the plane <m>z=r</m>.
              As <m>r</m> increases the radii increase,
              so we will obtain a cone with base at the origin,
              opening up with height <m>2</m>.
            </p>
          </li>
          <li>
            <p>
              For a fixed <m>\theta</m>,
              the graph of <m>z=\theta</m> is a line in the
              <m>z = \theta</m> plane making an angle of <m>\theta</m> with the <m>xz</m>-plane.
              Allowing <m>\theta</m> to vary will produce a set of lines,
              spiraling upward so that the result looks like a bit of an auger.
            </p>
          </li>
        </ol>
        </p>
      </solution>
    </activity>
    </subsection>
    <subsection xml:id="subsec-SphCoord">
      <title>Spherical Coordinates</title>
      <p>
        Cylindrical coordinates used an angular measurement in the <m>xy</m>-plane as part of the description of location. Spherical coordinates uses one linear measurement and two angular measurements to specify the location of a point. The spherical coordinates of a point in <m>\R^3</m> are <m>\rho</m> (rho), <m>\theta</m>, and <m>\phi</m> (phi), where <m>\rho</m> is the distance from the point to the origin, <m>\theta</m> has the same interpretation it does in polar coordinates, and <m>\phi</m> is the (smallest) angle between the positive <m>z</m>-axis and the vector from the origin to the point, as illustrated in <xref ref="sphdef">Figure</xref>. You should convince yourself that any point in <m>\R^3</m> can be represented in spherical coordinates with <m>\rho \geq 0</m>, <m>0 \leq \theta \lt 2 \pi</m>, and <m>0 \leq \phi \leq \pi</m>. 
      </p>
      <figure xml:id="sphdef">
        <caption>A plot of a point <m>P</m> with spherical coordinate measurement</caption>
        <image width="75%" xml:id="img-sphdef">
          <description>   </description>
          <interactive xml:id="interactive-sphdef" platform="sage" width="100%" aspect="1:1">
            <slate surface="sage">
              from sage.plot.plot3d.plot3d import axes
              var('s,t')
              scale=3
              a=arccos(3/sqrt(14))
              plot19=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
              plot19+=line([(0,0,0),(1,2,3)],color="blue",thickness=3)+line([(0,0,0),(1,2,0)],color="red",thickness=3)+line([(1,2,3),(1,2,0)],color="gray",linestyle="--")
              plot19+=parametric_plot3d((cos(t),sin(t),0),(t,0,arctan(2)),color="green")+arrow3d((cos(1.99),sin(1.99),0),(cos(2),sin(2),0),color="green")
              plot19+=parametric_plot3d((sin(t),2*sin(t),sqrt(5)*cos(t)),(t,0,a),color="orange")+arrow3d((sin(a-.01),2*sin(a-.01),sqrt(5)*cos(a-.01)),(sin(a),2*sin(a),sqrt(5)*cos(a)),color="orange")
              plot19+=point3d((1,2,3),size=10)+text3d("P",(1.1,2.1,3.1),fontsize=20)
              show(plot19.rotate((0,0,1),1.4),aspect_ratio=1)
            </slate>
          </interactive>
        </image>
      </figure>
      <assemblage xml:id="Spherical-rect">
        <title>Coverting between rectangular and spherical coordinates</title>
      <p>
        <ul>
          <li>
            <title>Converting from rectangular to spherical</title>
            <p>
              If we are given the Cartesian coordinates <m>(x,y,z)</m> of a point <m>P</m>, then the spherical coordinates <m>(\rho,\theta,\phi)</m> of <m>P</m> satisfy
              <me>
              \rho  = \sqrt{x^2  + y^2 + z^2} \ \ \ \ \  \tan(\theta) = \frac{y}{x} \ \ \ \ \ \text{ and } \ \ \ \ \  \cos(\phi) = \frac{z}{\rho},
              </me>
              where in the latter two equations, we require <m>x \ne 0</m> and <m>\rho \ne 0</m>.
            </p>
          </li>
  
          <li>
            <title>Converting from spherical to rectanglur</title>
            <p>
              If we are given the spherical coordinates <m>(\rho,\theta,\phi)</m> of a point <m>P</m>, then the Cartesian coordinates <m>(x,y,z)</m> of <m>P</m> satisfy
              <me>
              x = \rho \sin(\phi) \cos(\theta) \ \ \ \ \ y = \rho \sin(\phi) \sin(\theta) \ \ \ \ \ \text{ and } \ \ \ \ \ z = \rho \cos(\phi).
              </me>
            </p>
          </li>
        </ul>
      </p>
      </assemblage>



    <example xml:id="sph-coord-ex1">
      <p>
        In the following example, we investigate how to think about the spherical coordinate measurement of a point and how to convert between spherical coordinates and rectangular coordinates.
      </p>

      <figure xml:id="sphex1">
        <caption>A plot of a point <m>P</m> with spherical coordinate measurement</caption>
        <image width="75%" xml:id="img-sphex1">
          <description>   </description>
          <interactive xml:id="interactive-sphex1" platform="sage" width="100%" aspect="1:1">
            <slate surface="sage">
              from sage.plot.plot3d.plot3d import axes
              var('s,t')
              scale=3
              tval=3*pi/4
              xval=-2
              yval=2
              zval=sqrt(8)
              r=sqrt(xval^2+yval^2)
              rho=sqrt(xval^2+yval^2+zval^2)
              a=arccos(zval/rho)
              plot20=axes(scale,1,color="black",frame=False)+text3d("x",(scale+0.5,0,0),fontsize=30)+text3d("y",(0,scale+0.5,0),fontsize=30)+text3d("z",(0,0,scale+0.5),fontsize=30)
              plot20+=line([(0,0,0),(xval,yval,zval)],color="blue",thickness=3)+line([(0,0,0),(xval,yval,0)],color="red",thickness=3)+line([(xval,yval,zval),(xval,yval,0)],color="gray",linestyle="--")
              plot20+=parametric_plot3d((cos(t),sin(t),0),(t,0,tval),color="green")+arrow3d((cos(tval-0.1),sin(tval-0.1),0),(cos(tval),sin(tval),0),color="green")
              plot20+=parametric_plot3d((xval/rho*sin(t),yval/rho*sin(t),r/rho*cos(t)),(t,0,a),color="orange")+arrow3d((sin(a-.01),2*sin(a-.01),sqrt(5)*cos(a-.01)),(sin(a),2*sin(a),sqrt(5)*cos(a)),color="orange")
              plot20+=point3d((xval,yval,zval),size=10,color="black")+text3d("P",(xval+.1,yval+.1,zval+.1),fontsize=20,color="black")
              show(plot20.rotate((0,0,1),1.4),aspect_ratio=1)
            </slate>
          </interactive>
        </image>
      </figure>
      <p> 
        Consider the point <m>P</m> whose rectangular coordinates are <m>(-2,2,\sqrt{8})</m>. What is the distance from <m>P</m> to the origin? The result is the value of <m>\rho</m> in the spherical coordinates of <m>P</m>, so 
          <me>
            \rho = \sqrt{2^2+2^2+(\sqrt{8})^2} = 4
          </me>.
      </p>
      <p>        
        in order to find the <m>\theta</m> coordinate of <m>P</m>, we will need to determine the point that is the projection of <m>P</m> onto the <m>xy</m>-plane.  Then, use this projection to find the value of <m>\theta</m> in the polar coordinates of the projection of <m>P</m> that lies in the plane. The projection of <m>P</m> onto the <m>xy</m>-plane is the point <m>(-2,2,0)</m>. As we saw earlier with polar and cylindrical coordinates, we can use <m>\tan(\theta) = \frac{y}{x}</m> which for the point <m>P</m> means that <m>\tan(\theta) = \frac{-2}{2}=-1</m>. Remember that you will need to interpret the result of inverse trig functions according to the particular geometric situation given in the problem. In particular, <m>\arctan(-1)=-\frac{\pi}{4}</m> but we want will need to interpret <m>\theta</m> as a an angle in the second quadrant, we will use <m>\theta=\frac{3\pi}{4}</m>.
      </p>
      <p>
        Based on the illustration in <xref ref="sphex1">Figure</xref>, we can use the right triangle with sides that correspond to the measurement of <m>z</m>, <m>r</m>, and <m>\rho</m> to find the angle <m>\phi</m>. It may not be immediately clear where the angle <m>\phi</m> is in this triangle, but <xref ref="sphex11" /> shows how the alternate interior angles of the parallel lines (associated with <m>z</m> will be equal. In other words, the upper right angle in our right triangle will be the same size as <m>\phi</m>). 
       </p>
       <figure xml:id="sphex11">
        <caption>A 2D plot of a point <m>P</m> with spherical coordinate measurements in the plane of the measurement of <m>\theta</m></caption>
        <image width="75%" xml:id="img-sphex11">
          <description>   </description>
          <sageplot>
            rho=sqrt(1.2^2+1)
            a=arctan(1.2)
            plot21=line([(0,0),(1.2,0)],color="red",thickness=2,axes=True,axes_labels=["","$z$-axis"],ticks=[[],[]])
            plot21+=line([(0,0),(1.2,1)],color="blue",thickness=2)+line([(1.2,1),(1.2,0)],color="gray")
            plot21+=text("$r$",(0.75,.15),color="red",fontsize=15)+text("$\\rho$",(0.5,0.6),color="blue",fontsize=15)
            plot21+=text("$z$-coordinate",(1.9,0.5),color="gray",fontsize=15)
            plot21+=parametric_plot((sin(t),cos(t)),(t,0,a),color="orange")+arrow((sin(a-0.1),cos(a-0.1)),(sin(a),cos(a)),color="orange")
            plot21+=text("$\\phi$",(0.5,1.1),color="orange",fontsize=15)+text("$\\theta$-direction",(1.5,-0.15),color="black",fontsize=15)
            plot21+=parametric_plot((1.2-0.5*sin(t),1-0.5*cos(t)),(t,0,a),color="orange")#+arrow((1.2-0.5*sin(a-0.1),1-0.5*cos(a-0.1)),(1.2-0.5*sin(a),1-0.5*cos(a)),color="orange")
            plot21+=text("$\\phi$",(0.95,0.45),color="orange",fontsize=10)+point((1.2,1),size=10,color="black")
            plot21+=text("$P$",(1.3,1.1),color="black")
            show(plot21,xmin=-1,xmax=2,ymin=-1,ymax=2,aspect_ratio=1)
          </sageplot>
        </image>
      </figure>
      
      <p>
        So we can calculate the <m>\phi</m>-coordinate of <m>P</m> using the property that <m>\cos(\phi) = \frac{z}{\rho}=\frac{\sqrt{8}}{4}=\frac{\sqrt{2}}{2}</m>, which means that <m>\phi=\frac{\pi}{4}</m>.
      </p>
      <p>
        The point <m>P</m> with rectangular coordinates <m>(-2,2,\sqrt{8})</m> will be given by spherical coordinates of <m>(\rho,\theta,\phi)=(4,\frac{3\pi}{4},\frac{\pi}{4})</m>.

      </p>
    </example>
    <activity xml:id="Act-sph-rect-points">
      <task xml:id="Act-sph-rect-points1">
        <statement>
          <p>
            Use <xref ref="Spherical-rect" /> to find the rectangular coordinates of the following points:
          </p>
            <ol>
              <li>
                <m> (\rho, \theta, \phi)= (3, \frac{\pi}{3}, \frac{\pi}{2})</m>
              </li>
              <li>
                <m> (\rho, \theta, \phi)= (4, \frac{4\pi}{3}, \frac{3\pi}{4})</m>
              </li>
              <li>
                <m> (\rho, \theta, \phi)= (\sqrt{7}, 20^\circ, \pi)</m>
              </li>
            </ol>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Draw each of the points from <xref ref="Act-sph-rect-points1" /> and show how the spherical coordinates of each point is being measured. You should use your plots to make sense of the rectangular coordinate measurements that were your answer to <xref ref="Act-sph-rect-points1" />.
          </p>
        </statement>
      </task>
    </activity>
    
    <example>
      <p>
        Find the equations of the surfaces: Sphere, cone, plane containing the z-axis, 
      </p>
    </example>
    <activity>
      <statement>
        <p>
          In order to understand the phi coordinate more, we need to look at what the collections of points look like for different values of phi.
          Look at phi=0, 1, pi/2, 3pi/4, pi
        </p>
      </statement>
    </activity>
    <activity>
      <statement>
        <p>
          Fine the equation of the surface in spherical coordinates: xy-plane, xz-plane, z=x^2+y^2
        </p>
      </statement>
    </activity>
    <example>
      <p>
        Show what the region given by  <m> 0 \leq \theta \leq \pi </m>, <m>1 \leq \rho \leq </m>, and <m>\frac{\pi}{4} \leq \phi \leq \pi</m> looks like graphically. 
      </p>
    </example>
    <activity>
      <statement>
        <p>
          Draw what the following regions look like? <m>x^2+y^2+z^2 \leq 1</m> and <m>x^2+y^2 \leq 9</m> with <m>x\leq y</m> and <m> -1 \leq z \leq 3</m>
        </p>
      </statement>
    </activity>
  </subsection>


 

  <subsection>
    <title>Summary</title>
    <p>
    <ul>
      <li>
        <p>
          The cylindrical coordinates of a point <m>P</m> are <m>(r,\theta,z)</m> where <m>r</m> is the distance from the origin to the projection of <m>P</m> onto the <m>xy</m>-plane, <m>\theta</m> is the angle that the projection of <m>P</m> onto the <m>xy</m>-plane makes with the positive <m>x</m>-axis, and <m>z</m> is the vertical distance from <m>P</m> to the projection of <m>P</m> onto the <m>xy</m>-plane.  When <m>P</m> has rectangular coordinates <m>(x,y,z)</m>, it follows that  its cylindrical coordinates are given by
          <me>
            r^2  = x^2  + y^2, \ \ \ \ \ \tan(\theta) = \frac{y}{x}, \ \ \ \ \  z = z.
          </me>
          When <m>P</m> has given cylindrical coordinates <m>(r,\theta,z)</m>, its rectangular coordinates are
          <me>
            x = r \cos(\theta), \ \ \ \ \ y = r \sin(\theta), \ \ \ \ \ z = z.
          </me>
        </p>
      </li>

      <li>
        <p>
          The spherical coordinates of a point <m>P</m> in 3-space are <m>\rho</m> (rho), <m>\theta</m>, and <m>\phi</m> (phi), where <m>\rho</m> is the distance from <m>P</m> to the origin, <m>\theta</m> is the angle that the projection of <m>P</m> onto the <m>xy</m>-plane makes with the positive <m>x</m>-axis, and <m>\phi</m> is the angle between the positive <m>z</m> axis and the vector from the origin to <m>P</m>.  When <m>P</m> has Cartesian coordinates <m>(x,y,z)</m>, the spherical coordinates are given by
          <me>
            \rho^2  = x^2  + y^2 + z^2, \ \ \ \ \ \tan(\theta) = \frac{y}{x}, \ \ \ \ \ \cos(\phi) = \frac{z}{\rho}.
          </me>
          Given the point <m>P</m> in spherical coordinates <m>(\rho, \phi, \theta)</m>, its rectangular coordinates are
          <me>
            x = \rho \sin(\phi) \cos(\theta), \ \ \ \ \  y = \rho \sin(\phi) \sin(\theta), \ \ \ \ \ z = \rho \cos(\phi).
          </me>
        </p>
      </li>

    </ul>
  </p>
    </subsection>

    
</section>
