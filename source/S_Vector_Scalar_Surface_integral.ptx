<?xml version="1.0" encoding="UTF-8" ?>

<section xmlns:xi="http://www.w3.org/2001/XInclude" xml:id="S_ScalarSurfaceIntegral">
  <title>Surface Integrals of Scalar Valued Functions</title>
    <objectives>
      <ul>
	<li>
	  <p>What does a scalar surface integral measure?</p>
	</li>
  <li>
    <p>
      How can you efficently calculate scalar surface integrals?
    </p>
  </li>
  <li>
    <p>
      How do scalar surface integrals relate to flux integrals?
    </p>
  </li>
      </ul>
    </objectives>
  <introduction>
  <p>
    In Section <xref ref="S_Vector_FluxInt" />, the idea of a flux integral was introduced by looking at how much of a vector field flows through a given section of a surface in space. In particular, the flux integral measured the acculumualted amount of the vector field that is in the direction that is orthogonal to the surface (which changes at different points on the surface.) Theorem <xref ref="thm_flux_int_calc"/> shows the best way to calculate the flux integral in terms of a parameterization of the surface. This was an extension of the method for computing the surface area given in Section <xref ref="S-11-6-Parametric-Surfaces-Surface-Area"/>.
  </p>
  <p>
    Just as we generalized line integrals of vector fields into scalar line integrals in Section <xref ref="S_ScalarLineIntegral" />, we will spend this section looking at the following questions:
    <ul>
      <li>
        How could we measure the accumulation of a scalar valued function along a surface in space?
      </li>
      <li>
        What would that accmulation measure?
      </li>
      <li>
        What is the most efficent way to calculate this?
      </li>
    </ul>
  </p>
  </introduction>
  <p>
    In order to create a Riemann sum that will measure the acculumation of <m>f(x,y,z)</m>, a scalar valued function, over <m>S_1</m>. a bounded smooth surface in space, we will break our surface into smaller piecese where we can approximate the output of <m>f</m> and the surface area of each piece. In sections <xref ref="SS-11-6-2-Surface-Area-Parametrically-Defined-Surfaces" /> and <xref ref="S_Vector_FluxInt" />, we developed the way to measure surface area given a parameterization for the surface.
  </p>
  <p>
    Suppose that <m>S_1</m> is parametrized by <m>\vr(s,t)</m> with <m>a\leq s\leq b</m> and <m>c \leq t \leq d</m>.In our classic calculus style, we slice our region of interest into smaller pieces. Specifically, we slice <m>a\leq s\leq b</m> into <m>n</m> equally-sized subintervals with endpoints <m>s_1,\ldots,s_n</m> and <m>c \leq t \leq d</m> into <m>m</m> equally-sized subintervals with endpoints <m>t_1,\ldots,t_n</m>. This divides <m>D</m> into <m>nm</m>
    rectangles of size <m>\Delta{s}=\frac{b-a}{n}</m> by <m>\Delta{t}=\frac{d-c}{m}</m>. We index these rectangles as <m>D_{i,j}</m>. Every <m>D_{i,j}</m> has area (in the <m>st</m>-plane) of <m>\Delta{s}\Delta{t}</m>. The partition of <m>D</m> into the rectangles <m>D_{i,j}</m> also partitions <m>Q</m> into <m>nm</m> corresponding pieces which we call <m>Q_{i,j}=\vr(D_{i,j})</m>. From <xref ref="S-11-6-Parametric-Surfaces-Surface-Area" /> (specifically <xref ref="eq_11_6_parallelogram_area" />) the surface area of <m>Q_{i,j}</m> is approximated by <m>SA_{i,j}=\vecmag{(\vr_s \times \vr_t)(s_i,t_j)}\Delta{s}\Delta{t}</m>.
  </p>
  <figure xml:id="fig_SurfaceAreaPieces">
    <caption>Pieces of the tangent planes used to approximate surface area</caption>
    <interactive platform="sage" width="100%" aspect="1:1.12">
      <slate surface="sage">
        var('t,s,u,v,z,y,z')
        f=-x^2/2-3*y^3/3
        @interact
        def _(n=slider(3,10,1,4,label="Number of Sections in Grid")):
          plot1=plot3d(f,(x,-1,1),(y,-1,1),frame=False,opacity=.3)
          stepsize=2/(n)
          for i in range(0,n):
            a=-1+i*stepsize
            plot1+=parametric_plot3d((s,a,f(x=s,y=a)),(s,-1,1),color="gray")
            plot1+=parametric_plot3d((a,s,f(y=s,x=a)),(s,-1,1),color="gray")
            for j in range(0,n):
              b=-1+j*stepsize
              f_val=f(x=a,y=b)
              pos=(a,b,f_val)
              fx=diff(f,x)(x=a,y=b)
              fy=diff(f,y)(x=a,y=b)
              vt=(stepsize+a,b,stepsize*fx+f_val)
              vs=(a,b+stepsize,stepsize*fy+f_val)
              cr=(a-fx*stepsize,b-fy*stepsize,stepsize+f_val)
              plot1+=parametric_plot3d((a+t*stepsize,b+s*stepsize,f_val+t*stepsize*fx+s*stepsize*fy),(t,0,1),(s,0,1),color="orange",opacity=.6)
          show(plot1)
      </slate>
    </interactive>
  </figure>
  <p>
    So to measure the accumulation of the output of <m>f(x,y,z)</m> over <m>S_1</m> we use the following Riemann sum:
    <me>\sum_{i=0}^{k-1} \sum_{i=0}^{m-1} f(x_{i,j}^*,y_{i,j}^*,z_{i,j}^*) SA_{i,j}= 
      \sum_{i=0}^{k-1} \sum_{i=0}^{m-1} f(x(s_{i}^*,t_{j}^*),y(s_{i}^*,t_{j}^*),z(s_{i}^*,t_{j}^*)) SA_{i,j}= 
      \sum_{i=0}^{k-1} \sum_{i=0}^{m-1} f(s_{i}^*,t_{j}^*))\vecmag{(\vr_s \times \vr_t)(s_i,t_j)}\Delta{s}\Delta{t}
    </me>
    This Riemann sum ends up being the double integral (over the variables <m>s</m> and <m>t</m>) of the function <m>f(x(t,s),y(s,t),z(s,t)) \vecmag{(\vr_s \times \vr_t)(s,t)}</m>, which leads to the following theorem.
  </p>
  <theorem xml:id="ScalarSurfaceIntDef">
    <statement>
    <p>
      Let a smooth surface <m>S_1</m> be parametrized by <m>\vr(s,t)</m> over a domain <m>D</m> and let <m>f</m> be a continuous function on a neighborhood around <m>S_1</m>. The acculumation of <m>f(x,y,z)</m> over <m>S_1</m> is deonted by <m>\iint_{S_1} f dS</m> and is called the scalar surface integral of <m>f</m> over <m>S_1</m>. The scalar surface integral of <m>f</m> over <m>S_1</m> is computed as
        <me>
          \iint_{S_1} f dS = \iint_D f(s,t) \vecmag{(\vr_s \times \vr_t)(s,t)} dA
        </me>.
    </p>
    </statement>
  </theorem>
  <p>
    Activity
    would the accumulation of scalar functions over given surfaces be positive, negative, or zero?
    start with the top half of a sphere and f(x,y,z)=z. Show the surface with an outward pointing N.
    Ask same question with an inward point N.
    Explain why the direction of the normal vector doesn't matter for this accumulation.
    Look at f=x
    Look at f=x+z (hint: how would the accumulation of this be related to previous questions)
   </p>

  <activity xml:id="ScalarSurfaceInt_Sensemaking" >
    <introduction>
      <p>
        In order to pay for tutition, you take a job driving a mining machine that collects a very valuable mineral called Copium. Copium is only produced on the surface and is mined by scooping up the soil at the front of your machine, so the amoung of copium ore collected depends on the density of the ore and the distance driven by the mining machine. The plot of land you are mining has been surveyed for the density of copium ore and is presented in the contour plot below.
      </p>
      <figure xml:id="CopiumPlot">
        <image source="/images/CopiumMinePlot.svg" />
        <caption> A plot of land with density of Copium deposits </caption>
      </figure>
    </introduction>
    <task xml:id="task_SSIS_1">
      <statement>
        <p>
          Estimate the amount of Copium that would be mined from driving along the left side of plot. You should write a few sentences about how you got your estimate based on the copium density and length of the path. (Did you use more than one piece?)
        </p>
        </statement>
        <answer>
            <p>multiplied the density by the length to get the amount</p>
        </answer>
        <solution>
            <p>Write out a longer description?</p>
        </solution>
    </task>
    <task xml:id="task_SSIS_2">
      <statement>
        <p>
          Estimate the amount of Copium that would be mined from the entire outer edge of the plot. You should write a few sentences about how you got your estimate based on the Copium density and length of the paths.
        </p>
        </statement>
        <answer>
            <p>multiplied the density by the length to get the amount</p>
        </answer>
        <solution>
            <p>Write out a longer description?</p>
        </solution>
    </task>
    <task xml:id="task_SSIS_3">
      <statement>
        <p>
          Estimate the amount of copium that would be mined from the scraping the path given below. You should use at least 3 segments in your estimate. (put a curved path on the plot) You should write a few sentences about how you got your estimate based on the copium density and length of the paths.
        </p>
        <figure>
          <image source="images/CopiumPlotwithPath.svg"/>
          <caption> A plot of land with Copium Density and a path plotted in blue</caption>
        </figure>
        </statement>
        <answer>
            <p>multiplied the density by the length to get the amount</p>
        </answer>
        <solution>
            <p>Write out a longer description?</p>
        </solution>
    </task>
    <task xml:id="task_SSIS_4">
      <statement>
        <p>
          Estimate the amount of copium that would be mined from the scraping the path given below. You should use at least 3 segments in your estimate. You should explain how and why your answer to this question is different or similar to the previous task.
        </p>
        <figure>
          <image source="images/CopiumPlotwithPath2.svg"/>
          <caption> A plot of land with Copium Density and a path plotted in blue</caption>
        </figure>
        </statement>
        <answer>
            <p>multiplied the density by the length to get the amount</p>
        </answer>
        <solution>
            <p>Write out a longer description?</p>
        </solution>
    </task>
  </exploration>
<p>
    parallel activity about summing scalar surface integrals over surface areas, scalar multiples, sums and differences of functions
    Maybe this should be the application stuff. Look at the density of toxic fungus over a topographic map?
    If we have the density of a bacteria along a surface, what does scalar surface integral of the density measure.
    Maybe something with the interaction of bacteria and toxic fungus. A scalar function like kF-cB would measure the change in the fungus at each point (fungus begets more fungus and bacteria kills fungus). What would the scalar surface integral of this function measure?
   </p>

<subsection>
  <title>Properties of Scalar Surface Integrals</title>
  <p>
    Before stating some useful properties of scalar line integrals, we will recall some convenient notation. If <m>C_1</m> and <m>C_2</m> are oriented curves, with <m>C_1</m> from a point <m>P</m> to a point <m>Q</m> and <m>C_2</m> from <m>Q</m> to a point <m>R</m>, we denote by <m>C_1+C_2</m> the oriented curve from <m>P</m> to <m>R</m> that follows <m>C_1</m> to <m>Q</m> and then continues along <m>C_2</m> to <m>R</m>.  Also, if <m>C</m> is an oriented curve, <m>-C</m> denotes the same curve but with the opposite orientation. The list below summarizes some other properties of line integrals, each of which has a familiar analogue amongst the properties of definite integrals.
  </p>
  <p>
    <assemblage xml:id="asm_ScalarLineInt_Properties">
      <title>Properties of Scalar Line Integrals</title>
        <p>
          For a constant scalar <m>k</m>, scalar valued functions<m>f</m> and <m>g</m>, and oriented curves <m>C</m>, <m>C_1</m>, and <m>C_2</m>, the following properties hold:
          <ol marker="b.">
            <li>
              <p>
                <m>\displaystyle \int_C (k f) ds = k \int_C f ds</m>
              </p>
            </li>
            <li>
              <p>
                <m>\displaystyle\int_C (f+g) ds = \int_C f ds + \int_C g ds</m>
              </p>
            </li>
            <li>
              <p>
                <m>\displaystyle\int_{-C} f ds = \int_C f ds</m>
              </p>
            </li>
            <li>
              <p>
                <m>\displaystyle\int_{C_1+C_2} f ds = \int_{C_1} f ds + \int_{C_2} f ds</m>
              </p>
            </li>
          </ol>
        </p>
      </assemblage>
    </p>
    <activity xml:id="Explain_Int_Properties_Copium">
      <title>Explaining Properties of Scalar Line Integrals</title>
      <introduction>
        <p>
          In this activity, we will be explaining each of the Proporties from <xref ref="asm_ScalarLineInt_Properties" /> in the context of our Copium mining analogy from <xref ref="PA_ScalarLI" />. Remember that the curve in our scalar line integral cooresponds to the path the mining rig will take and the function in the scalar line integral measures the density of Copium at that point on the surface.
        </p>
      </introduction>
      <task>
        <p>
          Explain in your own words what <m>\int_C f ds</m> means in the Copium analogy and what exactly would be measured by this scalar line integral.
        </p>
        <answer>
          The scalar line integral <m>\int_C f ds</m> would calculate the accumulation of Copium mined along the path given by <m>C</m> where <m>f</m> gives the density of Copium at each location in the area. In particular, <m>\int_C f ds</m> measures the total Copium mined along the path <m>C</m>.
        </answer>
        <solution>
          The scalar line integral <m>\int_C f ds</m> would calculate the accumulation of Copium mined along the path given by <m>C</m> where <m>f</m> gives the density of Copium at each location in the area. In particular, <m>\int_C f ds</m> measures the total Copium mined along the path <m>C</m>.
        </solution>
      </task>
      <task>
        <p>
          Explain in your own words what <m>\displaystyle \int_C (k f) ds = k \int_C f ds</m> means in the Copium analogy. It may be helpful to describe each side of the equation separately and say why they are equal in the analogy.
        </p>
        <answer>
          asdf
        </answer>
        <solution>
          asdf
        </solution>
      </task>
      <task>
        <p>
          Explain in your own words what <m>\displaystyle\int_C (f+g) ds = \int_C f ds + \int_C g ds</m> means in the Copium analogy. It may be helpful to describe each side of the equation separately and say why they are equal in the analogy.
        </p>
        <answer>
          asdf
        </answer>
        <solution>
          asdf
        </solution>
      </task>
      <task>
        <p>
          Explain in your own words what <m>\displaystyle\int_{-C} f ds = \int_C f ds</m> means in the Copium analogy. It may be helpful to describe each side of the equation separately and say why they are equal in the analogy.
        </p>
        <answer>
          asdf
        </answer>
        <solution>
          asdf
        </solution>
      </task>
      <task>
        <p>
          Explain in your own words what <m>\displaystyle\int_{C_1+C_2} f ds = \int_{C_1} f ds + \int_{C_2} f ds</m> means in the Copium analogy. It may be helpful to describe each side of the equation separately and say why they are equal in the analogy.
        </p>
        <answer>
          asdf
        </answer>
        <solution>
          asdf
        </solution>
      </task>
    </activity>
    <p>
      We will spend the last part of this section talking about a way to try to visualize the scalar line integral as an area under a curve (in the same way that we visualized 1D integrals.) Let's return to our Copium analogy from <xref ref="PA_ScalarLI" />. In particular, we can look the left side of the mining area.
    </p>
    <figure>
      <image source="images/CopiumMinePlot.svg" />
      <caption> A plot of land with density of Copium deposits </caption>
    </figure>
    <p>
      In particular, we could visualize the linear density of Copium along the left side of the area using a plot like Figure <xref ref="LeftSideofCopiumMine" />.
      <figure xml:id="LeftSideofCopiumMine">
        <image source="images/leftsideplot.svg" />
        <caption> A plot of the Copium density on the left side of the mine shown above </caption>
      </figure>
      In Figure <xref ref="LeftSideofCopiumMine" />, the horizontal axis gives the distance traveled along the left side of Figure <xref ref="CopiumPlot" />. Because this is a stright path, we could plot the density above the path of the Copium mining plot. In fact, we could plot the density above the plot for all of the sides of the mining plot.
    </p>
    <figure xml:id="CopiumMinewithSides">
      <caption>A three-dimensional plot of the Copium Density plotted for the edges of the mining area</caption>
      <interactive xml:id="sage_copium_mine_sides" platform="sage" width="100%" aspect="1:1.1">
        <slate surface="sage">
          var('t,s,x,y')
          f=-x^2/2-3*y^3/3
          @interact
          def _():
            f(x,y)=(550-y+x)*.002+cos((x^2/700+sin(y*(250-x)))/50)
            plot8=polygon3d([[212.5,425,0],[512.5,525,0],[300,100,0],[0,0,0]],color='grey',opacity=.5)
            plot11=parametric_plot3d((t,2*t,0),(t,0,212.5),color='red')+parametric_plot3d((t,2*t,f(t,2*t)),(t,0,212.5),color='green')+parametric_plot3d((t,2*t,s*f(t,2*t)),(t,0,212.5),(s,0,1),color='yellow')
            plot11+=parametric_plot3d((212.5+3*t,425+t,0),(t,0,100),color='red')+parametric_plot3d((212.5+3*t,425+t,f(212.5+3*t,425+t)),(t,0,100),color='green')+parametric_plot3d((212.5+3*t,425+t,s*f(212.5+3*t,425+t)),(t,0,100),(s,0,1),color='yellow')
            plot11+=parametric_plot3d((300+t,100+2*t,0),(t,0,212.5),color='red')+parametric_plot3d((300+t,100+2*t,f(300+t,100+2*t)),(t,0,212.5),color='green')+parametric_plot3d((300+t,100+2*t,s*f(300+t,100+2*t)),(t,0,212.5),(s,0,1),color='yellow')
            plot11+=parametric_plot3d((3*t,t,0),(t,0,100),color='red')+parametric_plot3d((3*t,t,f(3*t,t)),(t,0,100),color='green')+parametric_plot3d((3*t,t,s*f(3*t,t)),(t,0,100),(s,0,1),color='yellow')
            show(plot11+plot8,aspect_ratio=(1,1,40))
        </slate>
      </interactive>
    </figure>
    <p>
      Figure <xref ref="CopiumMinewithSides" /> shows the Copium Mine plot (in gray) and the paths that are the boundary of the plot in red. The curve in green shows the Copium Density at each point on the boundary of the mine plot. The area in yellow would be the scalar line integral for the path that is the boundary of the mine plot. In particular, the area in yellow would give the total Copium mined from driving our mining machine around the boundary of the mine plot.
    </p>
    <p>
      Because the curve we are looking at in Figure <xref ref="CopiumMinewithSides" /> involves straight lines and simple heights, there is no confusion when looking at this plot and using an area under the curve analogy. What if we looked at the scalar line integral of a function like <m>f(x,y,z)=x-y</m> along the helix given below?
    </p>
    <figure xml:id="HelixPlot">
      <caption>A three-dimensional plot of a helix</caption>
      <interactive xml:id="helixplot1" platform="sage" width="100%" aspect="1:1.1">
        <slate surface="sage">
          var('t,s')
          @interact
          def _():
            plot1=parametric_plot3d((cos(t),sin(t),t/8),(t,0,11),color='green')+parametric_plot3d((cos(t),sin(t),t/8+cos(t)-sin(t)),(t,0,11),color='blue')
            show(plot1,aspect_ratio=(1,1,1))
        </slate>
      </interactive>
    </figure>
    <p>
      You can already see part of the problem involved here since if we used the <m>z</m>-coordinate to plot the output of our scalar function, then our area might intersect other parts of the curve. The plot below shows the confused plot we would have if we looked at <m>f(x,y,z)=x-y</m> as the height above our curve in blue.
    </p>
    <figure xml:id="HelixPlot2">
      <caption>A three-dimensional plot of a helix with height given by <m>f(x,y,z)=x-y</m></caption>
      <interactive xml:id="helixplot2" platform="sage" width="100%" aspect="1:1.1">
        <slate surface="sage">
          var('t,s')
          @interact
          def _():
            plot6=parametric_plot3d((cos(t),sin(t),t/8),(t,0,11),color='green')+parametric_plot3d((cos(t),sin(t),t/8+cos(t)-sin(t)),(t,0,11),color='blue')
            plot7=parametric_plot3d((cos(t),sin(t),t/8+s*(cos(t)-sin(t))),(t,0,11),(s,0,1),color='yellow')
            show(plot6+plot7, aspect_ratio=(1,1,1))
        </slate>
      </interactive>
    </figure>
</subsection>
</section>


